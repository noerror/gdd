# 리듬 & 타이밍 모듈 (Rhythm & Timing) 작성 가이드

## 1. 목적 (Purpose)
- 음악과 시각적 신호를 동기화하여, 플레이어가 타이밍에 맞춰 입력하는 과정에서 리듬감과 몰입감을 느끼도록 설계하기 위한 가이드입니다.

## 2. 범위 (Scope)
- **포함**: 노트 생성 및 배치, 판정(Timing Window), 싱크 조절(Calibration), QTE(Quick Time Event)
- **제외**: 배경 음악(BGM) 작곡 과정 자체, 사운드 엔진의 기술적 구현(버퍼 처리 등), 일반적인 전투의 공격 속도

## 3. 설계 목표 (Design Goals)

1.  **직관성 (Intuitiveness)**: 시각적 노트와 청각적 비트가 일치하여, 눈보다 귀를 믿고 플레이해도 위화감이 없어야 합니다.
2.  **가시성 (Visibility)**: 노트의 궤적과 판정선이 배경이나 이펙트에 묻히지 않고 명확하게 인식되어야 합니다.
3.  **피드백 유희 (Auditory Feedback)**: 입력 성공 시 출력되는 키음(Keysound)이나 효과음이 음악의 일부처럼 조화롭게 들려야 합니다.
4.  **관용성 (Tolerance)**: 하드웨어 레이턴시나 인간의 반응 속도 한계를 고려하여, 판정 범위에 합리적인 여유를 둡니다.

## 4. GDD 문서 구조 (Structure)

### 4.1 기본 구조 (Core Systems)
- **트랙(Track) & 레인(Lane)**: 노트가 이동하는 경로의 형태(직선, 곡선) 및 라인 개수(4/5/6/8키)
- **음악 동기화 (Sync)**: 곡의 BPM, 오프셋(Offset) 설정, 마디(Bar) 구분 및 비트(Beat) 기준점
- **노트 속도 (Speed)**: 기본 배속 설정, 변속 기믹(가속/감속/정지), 시각적 배율 조정 기능

### 4.2 노트 및 입력 (Notes & Input)
- **노트 유형**: 일반(Tap), 롱노트(Hold), 연타(Mash), 슬라이드(Drag), 플릭(Flick) 등 조작별 구분
- **판정 등급 (Judgement)**: Perfect(±ms), Great, Good, Miss 등 구간별 시간 범위(Time Window) 정의
- **게이지 및 생존 (Survival)**: 체력 바(Health Bar) 감소/회복 로직, 피버(Fever) 모드, 게임오버 조건

### 4.3 패턴 및 레벨 디자인 (Patterns)
- **채보 작성 (Charting)**: 난이도별(Easy~Expert) 노트 밀도(NPS) 제한, 손가락 배치, 패턴의 다양성 원칙
- **동적 연출 (Visuals)**: 콤보 달성, 피버 발동 시 배경/이펙트 변화, 카메라 워킹 연동
- **BGM 처리**: 입력 성공 시 키음(Keysound) 재생 여부, 미스 시 음악 볼륨 조절 또는 전용 효과음

### 4.4 선택 및 심화 (Optional & Advanced)
- **QTE (Quick Time Event)**: 컷신 연출 중 입력 트리거, 제한 시간, 실패 시 스토리/연출 분기 처리
- **고급 옵션**: 배속 미세 조절(0.1단위), 노트 스킨 변경, 싱크 상세 설정(ms 단위), 키 매핑 커스텀
- **협동 및 경쟁**: 실시간 멀티플레이 대결, 방해 공작(아이템전), 합주(Co-op) 모드 규칙
- **접근성 및 편의**: 자동 연주(Auto Play) 데모, 구간 반복 연습, 색각 이상 모드 지원

## 5. 관련 개념 (Related Concepts)

### 음악 및 시간 (Music & Time)
- **BPM (Beats Per Minute)**: 곡의 빠르기. 판정 간격의 기준이 됨
- **오프셋 (Offset)**: 입력과 사운드 출력 사이의 미세한 시간차를 보정하는 값
- **양자화 (Quantization)**: 입력된 신호를 가장 가까운 박자에 강제로 맞추는 보정 기술 (주로 리듬 액션 RPG)

### 게임플레이 요소 (Gameplay)
- **키음 (Keysound)**: 플레이어 입력 시 재생되는 악기 소리. 연주감의 핵심
- **QTE (Quick Time Event)**: 컷신 등에서 제한 시간 내 입력을 요구하는 기믹

## 6. 품질 체크리스트 (Quality Checklist)

### 6.1 싱크 및 판정
- [ ] 시청각적 큐(Cue)가 정확히 일치하며 박자감이 느껴지는가?
- [ ] 입력 딜레이(Input Lag) 보정 기능이 정상적으로 작동하는가?
- [ ] 판정 피드백(Effect/Text)이 노트를 가리지 않는 위치에 출력되는가?

### 6.2 가시성 및 플레이
- [ ] 배경이 화려해도 노트와 판정선이 뚜렷하게 구분되는가? (명도 대비)
- [ ] 난이도 곡선이 계단식이 아니라 완만하게 상승하는가?
- [ ] 롱노트나 슬라이드 입력의 시각적 가이드가 명확한가?

## 7. 예시 및 안티패턴 (Examples & Anti-Patterns)

**Case 1: 시각적 가독성**
- **좋은 예 (Good)**: "노트 레인에 반투명 검은 배경을 깔아, 화려한 3D 배경 위에서도 노트 식별 용이"
- **안티패턴 (Bad)**: "흰색 배경 위에서 흰색 노트가 내려옴" (플레이 불가능한 시인성)

**Case 2: 피드백**
- **좋은 예 (Good)**: "버튼을 누를 때마다 드럼 소리가 추가되어 내가 곡을 연주하는 느낌(Thumper)"
- **안티패턴 (Bad)**: "입력해도 틱틱거리는 기본 효과음만 나고 음악과 따로 놂" (단순 노동화)

**Case 3: 난이도 조절**
- **좋은 예 (Good)**: "Easy 모드에서는 정박(1/4박) 위주로 배치, Hard부터 엇박(1/8, 1/16) 등장"
- **안티패턴 (Bad)**: "난이도를 높이기 위해 노트가 갑자기 눈앞에서 사라지거나 순간이동함" (불합리한 시각적 방해)

## 8. 핵심 인사이트 (Key Insights)
- **최소한의 입력, 최대한의 느낌 (Thumper)**: 복잡한 버튼 조합보다, 하나의 버튼이라도 강력한 시청각적 피드백을 주는 것이 더 강렬합니다.
- **예측 가능성 (Preparation)**: 플레이어가 반응할 수 없는 속도는 도전이 아니라 폭력입니다. 다가오는 리듬을 미리 읽을 수 있게 하세요.
- **실패조차 음악처럼 (Auditory)**: 틀렸을 때 음악이 뚝 끊기기보다는, 불협화음이나 필터 효과로 자연스럽게 처리하는 것이 몰입을 덜 깹니다.

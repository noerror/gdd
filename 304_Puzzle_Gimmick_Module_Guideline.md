# 퍼즐 & 규칙 조합 모듈 (Puzzle & Gimmick) 작성 가이드

## 1. 목적 (Purpose)
- 논리적 사고나 직관적 규칙 조합을 통해 문제를 해결하는 즐거움을 설계하고, 이를 체계적으로 문서화하기 위한 가이드입니다.

## 2. 범위 (Scope)
- **포함**: 퍼즐 메커닉, 기믹 오브젝트(레버, 발판 등), 상호작용 규칙, 해답 검증 로직, 힌트 시스템
- **제외**: 순발력을 요하는 액션 컨트롤(M2 참조), 스토리 대화 선택지(M8 참조), 전투 밸런스

## 3. 설계 목표 (Design Goals)

1.  **규칙의 명확성 (Clarity)**: "어떻게 푸는가"는 고민하게 하되, "무엇을 해야 하는가"는 직관적으로 알 수 있어야 합니다.
2.  **아하 모먼트 (Epiphany)**: 억지스럽지 않은 논리적 연결을 통해, 해결 순간 플레이어가 스스로 똑똑하다고 느끼게 해야 합니다.
3.  **점진적 학습 (Learnability)**: 튜토리얼 텍스트 없이도, 쉬운 단계에서 어려운 단계로 자연스럽게 규칙을 체득하도록 설계합니다.
4.  **실패의 유용성 (Forgiveness)**: 실패가 처벌이 아니라, "이 방법은 아니구나"라는 정보를 제공하는 과정이어야 합니다.

## 4. GDD 문서 구조 (Structure)

### 4.1 메커닉 및 규칙 (Mechanics)
- **핵심 규칙 (Core Rule)**: 퍼즐 세계를 지배하는 대원칙 (예: "포털은 운동량을 보존한다", "그림자는 실체가 된다")
- **오브젝트 (Objects)**: 상호작용 가능한 기물(큐브, 레버, 발판)의 기능, 상태 변화(On/Off), 물리 속성
- **승리 조건**: 퍼즐이 해결된 상태(State)의 정확한 정의 (예: 모든 전원이 연결됨, 문이 열림)

### 4.2 레벨 및 구성 (Level Design)
- **도입부 (Introduction)**: 안전한 환경에서 기믹의 기본 동작 원리를 학습시키는 튜토리얼 단계
- **발전 및 심화 (Twist)**: 학습한 규칙을 비틀거나, 여러 기믹을 조합하여 복잡도를 높이는 응용 단계
- **마스터리 (Mastery)**: 모든 응용력과 통찰을 동원해야 풀 수 있는 최종 시험 단계

### 4.3 지원 시스템 (Systems)
- **피드백 (Feedback)**: 정답/오답 시의 시각(색상 변화, 점등), 청각(성공음/오류음), 햅틱 피드백 연출
- **검증 로직 (Validation)**: 퍼즐의 정답을 판정하는 알고리즘 (상태값 체크, 경로 연결 확인)
- **초기화 (Reset)**: 꼬인 상태를 초기화(R버튼)하거나, 직전 상태로 되돌리는(Undo) 기능 구현

### 4.4 선택 및 심화 (Optional & Advanced)
- **힌트 시스템 (Hints)**: 일정 시간 경과 시 힌트 아이콘 활성화, 단계적 힌트 제공(단서→방법→정답)
- **물리 기믹 (Physics)**: 중력, 마찰력, 부력, 자력 등 물리 엔진을 활용한 동적 퍼즐 요소
- **메타 퍼즐 (Meta Puzzle)**: 개별 퍼즐의 해결이 모여 거대한 비밀을 푸는 구조 (수집품, 히든 엔딩)
- **접근성 옵션**: 색각 이상자 모드(패턴/심볼 구분), 퍼즐 스킵 기능, 시간 제한 제거 옵션

## 5. 관련 개념 (Related Concepts)

### 디자인 원리 (Design Principles)
- **어포던스 (Affordance)**: 사물의 형태만 보고도 그 기능을 유추할 수 있게 하는 행동 유도성 (예: 레버는 당기고 싶게 생김)
- **유도된 실패 (Telegraphed Failure)**: 행동을 완료하기 전에 "이건 안 될 것 같다"는 것을 미리 시각적으로 암시함
- **빨간 청어 (Red Herring)**: 의도적으로 플레이어를 혼란스럽게 하는 가짜 단서 (신중히 사용 필요)

### 구조적 개념 (Structural)
- **메트로배니아 (Metroidvania)**: 특정 능력 획득 후 이전 지역의 퍼즐이 풀리는 구조
- **환경 퍼즐 (Environmental Puzzle)**: 별도의 UI 창이 아닌 게임 월드 자체를 조작하는 퍼즐

## 6. 품질 체크리스트 (Quality Checklist)

### 6.1 논리 및 규칙
- [ ] 퍼즐의 규칙이 일관적인가? (예외 상황 남발 금지)
- [ ] 우연히(Brute Force) 풀릴 확률이 너무 높지 않은가?
- [ ] 실패 시 왜 틀렸는지 납득할 수 있는가?

### 6.2 편의성
- [ ] 퍼즐 초기화(Reset)나 되돌리기(Undo) 기능이 있는가?
- [ ] 색각 이상자 등을 고려한 시각적 보조 수단(형태, 패턴)이 있는가?
- [ ] 중요 단서가 배경 그래픽에 묻히지 않고 잘 보이는가?

## 7. 예시 및 안티패턴 (Examples & Anti-Patterns)

**Case 1: 정보 제공**
- **좋은 예 (Good)**: "전선이 바닥에 연결되어 있어 전기의 흐름을 시각적으로 추적 가능" (직관적)
- **안티패턴 (Bad)**: "아무런 연결 고리 없는 레버를 당겼더니 저 멀리 문이 열림" (인과관계 불명)

**Case 2: 힌트 제공**
- **좋은 예 (Good)**: "파트너 캐릭터가 혼잣말로 '저 위쪽이 수상한데?'라고 넌지시 힌트 투척"
- **안티패턴 (Bad)**: "1분 지나면 화면 중앙에 정답을 바로 텍스트로 출력" (성취감 박탈)

**Case 3: 난이도 실패**
- **좋은 예 (Good)**: "새로운 기믹 등장 시 단독으로 사용해 익숙해지게 만든 후, 기존 기믹과 조합"
- **안티패턴 (Bad)**: "튜토리얼 직후에 모든 기믹이 한꺼번에 섞인 복합 퍼즐 등장" (인지 과부하)

## 8. 핵심 인사이트 (Key Insights)
- **문맥이 왕이다 (Portal)**: 퍼즐은 단순히 IQ 테스트가 아니라, 스토리와 세계관을 설명하는 도구여야 합니다.
- **스스로 깨닫게 하라 (The Witness)**: 텍스트 설명보다, 환경과 시행착오를 통해 플레이어가 규칙을 "발견"하게 만드는 것이 가장 강력합니다.
- **멈춤 없는 생각 (Flow)**: 플레이어가 손은 멈춰 있어도 머리는 계속 돌아가게 만드세요. 그것이 퍼즐 게임의 "액션"입니다.
